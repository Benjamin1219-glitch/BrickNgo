<!-- Dock-Style Navigation from Home Page -->
<nav class="dock-nav" id="dockNav">
  <div class="dock-container">
    <a href="/" class="dock-logo">
      <i class="fas fa-hard-hat"></i>
      <span>BRICKNGO</span>
    </a>
    <div class="dock-items">
      <a href="/" class="dock-item" data-tooltip="Home">
        <i class="fas fa-home"></i>
        <span>Home</span>
      </a>
      <a href="/#products-catalog" class="dock-item" data-tooltip="Shop">
        <i class="fas fa-store"></i>
        <span>Shop</span>
      </a>
      <a href="/cart" class="dock-item" data-tooltip="Cart">
        <i class="fas fa-shopping-cart"></i>
        <span>Cart</span>
      </a>
      <a href="/orders" class="dock-item" data-tooltip="My Orders">
        <i class="fas fa-box"></i>
        <span>Orders</span>
      </a>
      <a href="/login" class="dock-item" data-tooltip="Login" id="navAuthLink">
        <i class="fas fa-user"></i>
        <span id="navAuthText">Login</span>
      </a>
    </div>
    <div class="dock-actions">
      <a href="/cart" class="dock-btn cart-btn" data-tooltip="Shopping Cart">
        <i class="fas fa-shopping-cart"></i>
        <span class="cart-badge" id="navCartBadge" style="display: none;">0</span>
      </a>
      
      <!-- User Profile Section -->
      <div class="user-profile-section" id="userProfileSection" style="display: none;">
        <div class="user-avatar">
          <i class="fas fa-user-circle"></i>
        </div>
        <span class="user-name" id="navUserName"></span>
      </div>
      
      <a href="/login" class="dock-btn profile-btn" data-tooltip="Login / Signup" id="navAuthBtn">
        <i class="fas fa-user"></i>
      </a>
      
      <a href="/admin-dashboard" class="dock-btn admin-btn" data-tooltip="Admin Dashboard">
        <i class="fas fa-cog"></i>
      </a>
      
      <button class="dock-btn theme-btn" onclick="toggleTheme()" data-tooltip="Toggle Theme">
        <i class="fas fa-moon"></i>
      </button>
    </div>
  </div>
</nav>

<style>
  /* Enhanced User Profile Styling */
  .user-profile-section {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: 0.5rem 1rem;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 25px;
    color: white;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    transition: all 0.3s ease;
  }
  
  .user-profile-section:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
  }
  
  .user-avatar {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid rgba(255, 255, 255, 0.3);
  }
  
  .user-avatar i {
    font-size: 1.5rem;
    color: white;
  }
  
  .user-name {
    font-size: 0.95rem;
    font-weight: 600;
    color: white;
    max-width: 120px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  
  /* Enhanced Profile Button */
  .profile-btn {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
    color: white !important;
    border: none !important;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
  }
  
  .profile-btn:hover {
    background: linear-gradient(135deg, #5568d3 0%, #653a8b 100%) !important;
    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5) !important;
  }
  
  /* Admin Button Styling */
  .admin-btn {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%) !important;
    color: white !important;
    border: none !important;
  }
  
  .admin-btn:hover {
    background: linear-gradient(135deg, #e082ea 0%, #e4465b 100%) !important;
  }
  
  /* Theme Button Styling */
  .theme-btn {
    background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%) !important;
    color: white !important;
    border: none !important;
  }
  
  .theme-btn:hover {
    background: linear-gradient(135deg, #3e9bed 0%, #00e1ed 100%) !important;
  }
  
  @media (max-width: 768px) {
    .user-profile-section {
      padding: 0.4rem 0.75rem;
      gap: 0.5rem;
    }
    
    .user-name {
      font-size: 0.85rem;
      max-width: 80px;
    }
    
    .user-avatar {
      width: 32px;
      height: 32px;
    }
  }
</style>

<script>
  // Update navbar with session data
  if (typeof sessionManager !== 'undefined') {
    sessionManager.init().then(() => {
      const user = sessionManager.getUser();
      const cartCount = sessionManager.getCartCount();
      
      // Update cart badge
      const badge = document.getElementById('navCartBadge');
      if (badge && cartCount > 0) {
        badge.textContent = cartCount;
        badge.style.display = 'block';
      }
      
      // Update auth links and profile section
      const authLink = document.getElementById('navAuthLink');
      const authBtn = document.getElementById('navAuthBtn');
      const authText = document.getElementById('navAuthText');
      const profileSection = document.getElementById('userProfileSection');
      const userName = document.getElementById('navUserName');
      
      if (user) {
        // Show user profile section
        if (profileSection) {
          profileSection.style.display = 'flex';
          profileSection.onclick = async (e) => {
            e.preventDefault();
            if (confirm('Do you want to logout?')) {
              await sessionManager.logout();
              window.location.href = '/';
            }
          };
          profileSection.style.cursor = 'pointer';
          profileSection.setAttribute('data-tooltip', 'Click to logout');
        }
        
        // Update user name
        if (userName) {
          userName.textContent = user.name || 'User';
        }
        
        // Update main auth link in dock-items
        if (authText) authText.textContent = 'Logout';
        if (authLink) {
          authLink.href = '#';
          authLink.onclick = async (e) => {
            e.preventDefault();
            await sessionManager.logout();
            window.location.href = '/';
          };
        }
        
        // Update profile button - change to logout
        if (authBtn) {
          authBtn.innerHTML = '<i class="fas fa-sign-out-alt"></i>';
          authBtn.setAttribute('data-tooltip', 'Logout');
          authBtn.onclick = async (e) => {
            e.preventDefault();
            await sessionManager.logout();
            window.location.href = '/';
          };
        }
      } else {
        // Hide profile section when not logged in
        if (profileSection) {
          profileSection.style.display = 'none';
        }
        
        // Show login button
        if (authBtn) {
          authBtn.innerHTML = '<i class="fas fa-user"></i>';
          authBtn.setAttribute('data-tooltip', 'Login / Signup');
          authBtn.href = '/login';
          authBtn.onclick = null;
        }
      }
    });
  }
  
  function toggleTheme() {
    document.body.classList.toggle('dark-theme');
    const icon = document.querySelector('.theme-btn i');
    if (icon) {
      icon.classList.toggle('fa-moon');
      icon.classList.toggle('fa-sun');
    }
  }
</script>
